@using Viettel.Models.QLVonDauTu;
@model ThongTinGoiThauViewModel
@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_LayoutWebNew.cshtml";
    DuAnViewModel objDuAn = ViewBag.ChiTietDuAn;
}

<link href="~/Content/plugins/dropdowntree.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.materialdesignicons.com/5.0.45/css/materialdesignicons.min.css">
<link rel="stylesheet" type="text/css" href="~/Content/css/DanhMuc/style.css">

<div class="main">
    <div class="panel-list-item col-sm-12">
        <div class="card">
            <div class="card-body create_thdt">

                @*Thông tin dự án*@
                <div class="form-group">
                    <h4 class="color-text-red">Thông tin dự án:</h4>
                    <hr class='color-background-red' />
                    <div class="form-group row">
                        <div class="col-sm-3">
                            <label>Đơn vị: </label>
                            <label class="label-item">@(objDuAn ==null? "": objDuAn.sTenDonvi)</label>
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-sm-3">
                            <label>Dự án: </label>
                            <label class="label-item">@(objDuAn ==null? "": objDuAn.sTenDuAn)</label>
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-sm-12">
                            <label>Địa điểm: </label>
                            <label class="label-item" id="sDiaDiem">@(objDuAn == null ? "" : objDuAn.sDiaDiem)</label>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-3">
                            <label>Thời gian thực hiện: </label>
                            <label class="label-item" id="sKhoiCong">@(objDuAn == null ? "" :objDuAn.sKhoiCong)</label>
                            <label>-</label>
                            <label class="label-item" id="sKetThuc">@(objDuAn == null ? "" :objDuAn.sKetThuc)</label>
                        </div>
                        <div class="col-sm-3">
                            <label>Tổng mức đầu tư: </label>
                            <label class="label-item" id="tongMucDauTu">@(objDuAn == null? "": objDuAn.fHanMucDauTu.GetValueOrDefault().ToString("###,###"))</label>
                        </div>
                    </div>
                </div>

                @*Thông tin gói thầu*@
                <div class="form-group">
                    <h4 class="color-text-red">Thông tin gói thầu:</h4>
                    <hr class='color-background-red' />
                    <input type="hidden" value="@Model.sHinhThucChonNhaThau" id="ptChonNhaThauSelected" />
                    <input type="hidden" value="@Model.sHinhThucHopDong" id="htHopDongSelected" />
                    <input type="hidden" value="@Model.sPhuongThucDauThau" id="ptDauThauSelected" />
                    <div class="form-group row">
                        <div class="col-sm-3">
                            <label for="txtThamDinhSo">Số quyết định</label>

                            <input type="text" disabled id="sSoQuyetDinh" name="sSoQuyetDinh" class="form-control" value="@Model.sSoQuyetDinh" />
                            <input type="hidden" id="iID_GoiThauID" value="@Model.iID_GoiThauID" />
                        </div>
                        <div class="col-sm-3">
                            <label for="txtNgayPheDuyet">Ngày quyết định</label>
                            <input type='text' class="form-control" disabled value="@(Model.dNgayQuyetDinh == null ?"":Model.dNgayQuyetDinh.GetValueOrDefault().ToString("dd/MM/yyyy"))" id="dNgayQuyetDinh" name="dNgayQuyetDinh" autocomplete="off" placeholder="dd/MM/yyyy" />

                        </div>

                    </div>
                    <div class="form-group row">
                        @*<div class="col-sm-3">
                            <label for="txtThamDinhSo">Tên gói thầu</label>
                            <input type="text" disabled id="sTenGoiThau" name="sTenGoiThau" class="form-control" value="@Model.sTenGoiThau" />

                        </div>*@
                        <div class="col-sm-3">
                            <label for="txtNgayThamDinh">HT chọn nhà thầu</label>
                            <div id="HTChonNT"> @Model.sHinhThucChonNhaThau
                            </div>

                        </div>
                        <div class="col-sm-3">
                            <label for="txtCoQuanThamDinh">PT đấu thầu</label>
                            <div id="ptDauThau">@Model.sPhuongThucDauThau
                            </div>
                        </div>

                    </div>
                    <div class="form-group row">
                        <div class="col-sm-3">
                            <label for="txtNgayPheDuyet">HT Hợp đồng</label>
                            <div id="htHopDong">@Model.sHinhThucHopDong
                            </div>
                            @*<input type="text" id="sHinhThucHopDong" class="form-control col-sm-6" name="sHinhThucHopDong" value="@Model.sHinhThucChonNhaThau" />*@
                        </div>
                        @*<div class="col-sm-3">
                            <label for="txtNgayPheDuyet">Thời gian thực hiện(Ngày)</label>
                            <input type="text" disabled id="iThoiGianThucHien" class="form-control col-sm-6" name="iThoiGianThucHien" value="@Model.iThoiGianThucHien" />
                        </div>*@
                        <div class="col-sm-3">
                            <div class="">
                                <label for="txtSoQuyetDinh">Thời gian chọn NT</label>
                            </div>
                            <div class="col-sm-5" style=" padding: 0 !important; margin: 0 !important;">

                                <input type='text' disabled class="form-control" id="dBatDauChonNhaThau" name="dBatDauChonNhaThau" value="@(Model.dBatDauChonNhaThau == null ?"":Model.dBatDauChonNhaThau.GetValueOrDefault().ToString("dd/MM/yyyy"))" autocomplete="off" placeholder="dd/MM/yyyy" />
                            </div>
                            <div class="col-sm-2">
                                <label class="center">_</label>
                            </div>
                            <div class="col-sm-5" style="padding: 0 !important; margin: 0 !important; ">

                                <input type='text' disabled class="form-control" id="dKetThucChonNhaThau" name="dKetThucChonNhaThau" value="@(Model.dKetThucChonNhaThau == null ?"":Model.dKetThucChonNhaThau.GetValueOrDefault().ToString("dd/MM/yyyy"))" autocomplete="off" placeholder="dd/MM/yyyy" />

                            </div>
                        </div>

                    </div>
                </div>

                @*Kết quả thầu*@
                <div class="form-group">
                    <h4 class="color-text-red">Kết quả thầu:</h4>
                    <hr class='color-background-red' />
                    <div class="row">
                        @*<div class="col-sm-3">
                            <label for="txtCoQuanPheDuyet">Nhà thầu trúng thầu</label>

                            @Html.DropDownList("iID_NhaThauID", (SelectList)(ViewBag.ListNhaThau), "--Chọn--", new { @disabled = "disabled", @class = "form-control", @id = "iID_NhaThauID" })
                        </div>*@
                        <div class="col-sm-3">
                            <label for="txtNguoiKy">Giá trúng thầu phê duyệt</label>
                            <input type="text" id="fTienTrungThau" disabled class="form-control text-right" value="@(Model.fTienTrungThau == null? "": Model.fTienTrungThau.Value.ToString("###,###"))" />
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <h4 class="color-text-red">Thông tin nhà thầu hợp đồng</h4>
                    <hr class='color-background-red' />
                    <div class="form-group row">
                        <div class="col-sm-6">
                            @*Nhà thầu hợp đồng*@
                            <div class="form-group">
                                @*<h4 class="color-text-red">Thông tin hợp đồng</h4>
                                     <hr class='color-background-red' />*@
                                <br />
                                <div class="row">
                                    <div class="col-sm-12">
                                        <table class="table table-bordered" id="tblDanhSachHopDong">

                                            <thead>
                                                <tr>
                                                    <th>Số hợp đồng</th>
                                                    <th>Ngày hợp đồng</th>
                                                    <th>Loại hợp đồng</th>
                                                    <th>Nhà thầu</th>
                                                    <th>Giá trị hợp đồng</th>
                                                    @*<th width="20%">Giá trị phê duyệt</th>*@
                                                </tr>
                                            </thead>
                                            <tbody></tbody>

                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                @*Thông tin chi tiết*@
                <div class="form-group">

                    <div class="form-group row">
                        <div class="col-sm-6">
                            @*nguồn vốn*@
                            <div class="form-group">
                                <h4 class="color-text-red">Thông tin nguồn vốn</h4>
                                <hr class='color-background-red' />
                                <br />
                                <div class="row">
                                    <div class="col-sm-12">
                                        <table class="table table-bordered" id="tblDanhSachNguonVon">
                                            <thead>
                                                <tr>
                                                    <th>Nguồn vốn</th>
                                                    <th>Giá trị nguồn vốn</th>
                                                    @*<th width="20%">Giá trị phê duyệt</th>*@
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            @*<tfoot>
                                        <tr>
                                            <th colspan="2">Tổng nguồn vốn</th>
                                            <th class="rTongNguonVon" style="text-align: right"></th>
                                            <th></th>
                                        </tr>

                                    </tfoot>*@
                                        </table>
                                    </div>
                                </div>

                            </div>

                            @*Chi Phí*@
                            <div class="form-group">
                                <h4 class="color-text-red">Thông tin chi phí</h4>
                                <hr class='color-background-red' />
                                <br />
                                <div class="row">
                                    <div class="col-sm-12">
                                        <table class="table table-bordered" id="tblChiPhiDauTu">
                                            <thead>
                                                <tr>
                                                    <th>Chi phí</th>
                                                    <th>Giá trị chi phí</th>
                                                    @*<th width="20%">Giá trị phê duyệt</th>*@
                                                    <th width="50px"></th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        @*hạng mục*@
                        <div class="col-sm-6">
                            <h4 class="color-text-red">Thông tin hạng mục</h4>
                            <hr class='color-background-red' />
                            <br />
                            <div class="row">
                                <div class="col-sm-12" id="tblDanhSachHangMuc">
                                    <table class="table table-bordered" id="tblHangMucChinh">
                                        <thead>
                                            <tr>
                                                <th width="50px">STT</th>
                                                <th>Tên Hạng mục</th>
                                                <th>Giá trị hạng mục</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>




                    <div class="form-group text-center">
                        <button class="btn btn-back" onclick="Huy()"><i class="fa fa-arrow-left" aria-hidden="true"></i><span>Quay lại</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@*<script src="~/Scripts/QLVonDauTu/GoiThau/jsVDT_DetailGoiThau.js"></script>*@
<script src="~/Scripts/QLVonDauTu/GoiThau/jsVDT_DetailGoiThau.js"></script>
<script src="/Scripts/sheet/jsNumber.js" type="text/javascript"></script>
<script src="~/Scripts/js/dropdowntree.js"></script>

<style>
    /*        .table-bordered tr, td {
            border: 1px solid
        }*/
    .create_thdt h4 {
        font-size: 17px;
    }

    .r_STT {
        text-align: center;
    }

    .r_GiaTriToTrinh, .cpdt_tong_giatritotrinh {
        text-align: right;
    }

    .table-bordered tbody {
        /*display: block;*/
        /*height: 150px;*/
        overflow: auto;
    }
    #tblDanhSachNguonVon, #tblChiPhiDauTu, #tblDanhSachHopDong {
        display: block;
        overflow: auto;
        max-height: 250px;
    }

    #tblHangMucChinh {
        display: block;
        overflow: auto;
        max-height: 750px;
    }

    #tblDanhSachNguonVon thead, #tblChiPhiDauTu thead, #tblDanhSachHopDong thead, #tblHangMucChinh thead {
        position: sticky;
        top: 0;
        z-index: 1;
    }

    #tblDanhSachNguonVon tr, #tblChiPhiDauTu tr, #tblHangMucChinh tr, #tblDanhSachHopDong tr {
        display: table;
        table-layout: fixed;
        width: 100%;
    }
</style>

